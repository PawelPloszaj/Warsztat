@page "/add-mechanic"
@using WebApp.Client.Services
@using WebApp.Shared.Dto
@inject MechanicService MechanicService
@inject NavigationManager Navigation

<h3>Add Mechanic</h3>

<EditForm Model="@newMechanic" OnValidSubmit="HandleValidSubmit">
    <DataAnnotationsValidator />
    <div>
        <label>First Name:</label>
        <InputText @bind-Value="newMechanic.FirstName" />
    </div>
    <div>
        <label>Last Name:</label>
        <InputText @bind-Value="newMechanic.LastName" />
    </div>
    <button type="submit">Add</button>
</EditForm>

@code {
    private MechanicDto newMechanic = new MechanicDto();

    private async Task HandleValidSubmit()
    {
        try
        {
            await MechanicService.AddMechanicAsync(newMechanic);
            Navigation.NavigateTo("/mechanics");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error adding mechanic: {ex.Message}");
        }
    }
}
